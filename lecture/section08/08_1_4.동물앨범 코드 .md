## 오늘 추가된 SPA(싱글페이지앱) 라우팅 및 상태관리 코드

```js
// 1. 현재 URL 경로에 따라 초기 탭을 결정 (새로고침/직접 진입 시에도 URL 반영)
this.state = {
  currentTab: window.location.pathname.replace("/", "") || "all",
  photos: [],
};

// 2. 탭 클릭 시 URL을 변경하고, 해당 탭의 데이터를 불러옴
const tabBar = new TabBar({
  $app,
  initialState: "",
  onClick: async (name) => {
    history.pushState(null, `${name} 사진`, `/${name}`); // URL 변경 (SPA)
    this.updateContent(name); // 해당 탭 데이터 갱신
  },
});

// 3. 뒤로가기/앞으로가기(popstate) 시, URL에 맞는 탭 데이터로 갱신
window.addEventListener("popstate", async () => {
  this.updateContent(window.location.pathname.replace("/", ""));
});

// 4. 탭 이름에 따라 API 요청 및 상태 갱신 함수
this.updateContent = async (tabName) => {
  try {
    const currentTab = tabName === "all" ? "" : tabName;
    const photos = await request(currentTab); // API 요청
    this.setState({
      ...this.state,
      currentTab: tabName,
      photos: photos,
    });
  } catch (error) {
    console.log(error);
  }
};
```
